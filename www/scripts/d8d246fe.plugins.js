!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom",i;typeof e!="object"&&(f=g=e),typeof g=="function"&&(g=e.top()),typeof f=="function"&&(f=e.bottom()),i=this.unpin!=null&&c+this.unpin<=d.top?!1:f!=null&&d.top+this.$element.height()>=b-f?"bottom":g!=null&&c<=g?"top":!1;if(this.affixed===i)return;this.affixed=i,this.unpin=i=="bottom"?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:""))},a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;e||d.data("affix",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){function d(){e(a(b)).removeClass("open")}function e(b){var c=b.attr("data-target"),d;return c||(c=b.attr("href"),c=c&&c.replace(/.*(?=#[^\s]*$)/,"")),d=a(c),d.length||(d=b.parent()),d}"use strict";var b="[data-toggle=dropdown]",c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),f,g;if(c.is(".disabled, :disabled"))return;return f=e(c),g=f.hasClass("open"),d(),g||(f.toggleClass("open"),c.focus()),!1},keydown:function(b){var c,d,f,g,h,i;if(!/(38|40|27)/.test(b.keyCode))return;c=a(this),b.preventDefault(),b.stopPropagation();if(c.is(".disabled, :disabled"))return;g=e(c),h=g.hasClass("open");if(!h||h&&b.keyCode==27)return c.click();d=a("[role=menu] li:not(.divider) a",g);if(!d.length)return;i=d.index(d.filter(":focus")),b.keyCode==38&&i>0&&i--,b.keyCode==40&&i<d.length-1&&i++,~i||(i=0),d.eq(i).focus()}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api touchstart.dropdown.data-api",d),a("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown",function(a){a.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",b,c.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",b+", [role=menu]",c.prototype.keydown)})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove(),this},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;a("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1).focus(),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,a("body").removeClass("modal-open"),this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(a){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})})}(window.jQuery),!function(a){a(function(){"use strict",a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content > *")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},move:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=!~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){if(this.suppressKeyPressRepeat)return;this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".item.active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j=a.Event("slide",{relatedTarget:e[0]});this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h]();if(e.hasClass("active"))return;if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),g=typeof c=="string"?c:f.slide;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):g?e[g]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&d.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery);var Events,Hoodie,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};Events=function(){function a(){}return a.prototype.bind=function(a,b){var c,d,e,f,g,h;d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={}),h=[];for(f=0,g=d.length;f<g;f++)e=d[f],c[e]||(c[e]=[]),h.push(c[e].push(b));return h},a.prototype.on=a.prototype.bind,a.prototype.one=function(a,b){return this.bind(a,function(){return this.unbind(a,arguments.callee),b.apply(this,arguments)})},a.prototype.trigger=function(){var a,b,c,d,e,f,g;a=1<=arguments.length?__slice.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&((g=this._callbacks)!=null?g[c]:void 0);if(!d)return;for(e=0,f=d.length;e<f;e++)b=d[e],b.apply(this,a);return!0},a.prototype.unbind=function(a,b){var c,d,e,f,g,h;if(!a)return this._callbacks={},this;e=(h=this._callbacks)!=null?h[a]:void 0;if(!e)return this;if(!b)return delete this._callbacks[a],this;for(d=f=0,g=e.length;f<g;d=++f){c=e[d];if(c!==b)continue;e=e.slice(),e.splice(d,1),this._callbacks[a]=e;break}return this},a}(),Hoodie=function(a){function b(a){this.baseUrl=a,this.baseUrl?this.baseUrl=this.baseUrl.replace(/\/+$/,""):this.baseUrl=location.protocol+"//api."+location.hostname.replace(/^www\./,""),this.store=new this.constructor.LocalStore(this),this.config=new this.constructor.Config(this),this.account=new this.constructor.Account(this),this.remote=new this.constructor.AccountRemote(this),this._loadExtensions()}return __extends(b,a),b.prototype.request=function(a,b,c){var d;return c==null&&(c={}),d={type:a,url:""+this.baseUrl+b,xhrFields:{withCredentials:!0},crossDomain:!0,dataType:"json"},$.ajax($.extend(d,c))},b.prototype.open=function(a,c){return c==null&&(c={}),$.extend(c,{name:a}),new b.Remote(this,c)},b.prototype.uuid=function(a){var b,c,d;return a==null&&(a=7),b="0123456789abcdefghijklmnopqrstuvwxyz".split(""),d=b.length,function(){var e,f;f=[];for(c=e=0;0<=a?e<a:e>a;c=0<=a?++e:--e)f.push(b[0|Math.random()*d]);return f}().join("")},b.prototype.defer=$.Deferred,b.prototype.isPromise=function(a){return typeof (a!=null?a.done:void 0)=="function"&&typeof a.resolve=="undefined"},b.prototype.resolveWith=function(){var a;return(a=this.defer()).resolve.apply(a,arguments).promise()},b.prototype.rejectWith=function(){var a;return(a=this.defer()).reject.apply(a,arguments).promise()},b.extend=function(a,b){return this._extensions||(this._extensions={}),this._extensions[a]=b},b.prototype.extend=function(a,b){return this[a]=new b(this)},b.prototype._loadExtensions=function(){var a,b,c,d;c=this.constructor._extensions,d=[];for(b in c)a=c[b],d.push(this[b]=new a(this));return d},b}(Events),Hoodie.Account=function(){function a(a){this.hoodie=a,this._handleChangeUsernameAndPasswordRequest=__bind(this._handleChangeUsernameAndPasswordRequest,this),this._sendChangeUsernameAndPasswordRequest=__bind(this._sendChangeUsernameAndPasswordRequest,this),this._cleanup=__bind(this._cleanup,this),this._handleFetchBeforeDestroySucces=__bind(this._handleFetchBeforeDestroySucces,this),this._handlePasswordResetStatusRequestError=__bind(this._handlePasswordResetStatusRequestError,this),this._handlePasswordResetStatusRequestSuccess=__bind(this._handlePasswordResetStatusRequestSuccess,this),this._checkPasswordResetStatus=__bind(this._checkPasswordResetStatus,this),this._handleSignInSuccess=__bind(this._handleSignInSuccess,this),this._delayedSignIn=__bind(this._delayedSignIn,this),this._handleSignUpSucces=__bind(this._handleSignUpSucces,this),this._handleRequestError=__bind(this._handleRequestError,this),this._handleAuthenticateSuccess=__bind(this._handleAuthenticateSuccess,this),this.fetch=__bind(this.fetch,this),this.authenticate=__bind(this.authenticate,this),this.username=this.hoodie.config.get("_account.username"),this.ownerHash=this.hoodie.config.get("_account.ownerHash"),this.ownerHash||this._setOwner(this.hoodie.uuid()),window.setTimeout(this.authenticate),this._checkPasswordResetStatus()}return a.prototype.username=void 0,a.prototype.authenticate=function(){return this.username?this._authenticated===!0?this.hoodie.defer().resolve(this.username).promise():this._authenticated===!1?this.hoodie.defer().reject().promise():this.hoodie.request("GET","/_session").pipe(this._handleAuthenticateSuccess,this._handleRequestError):(this._sendSignOutRequest(),this.hoodie.defer().reject().promise())},a.prototype.signUp=function(a,b){var c;return b==null&&(b=""),a?this.hasAnonymousAccount()?this._upgradeAnonymousAccount(a,b):this.hasAccount()?this.hoodie.defer().reject({error:"you have to sign out first"}).promise():(c={data:JSON.stringify({_id:this._key(a),name:this._userKey(a),type:"user",roles:[],password:b,ownerHash:this.ownerHash,database:this.db()}),contentType:"application/json"},this.hoodie.request("PUT",this._url(a),c).pipe(this._handleSignUpSucces(a,b),this._handleRequestError)):this.hoodie.defer().reject({error:"username must be set"}).promise()},a.prototype.anonymousSignUp=function(){var a,b,c=this;return a=this.hoodie.uuid(10),b=this.ownerHash,this.signUp(b,a).pipe(null,this._handleRequestError).done(function(){return c.hoodie.config.set("_account.anonymousPassword",a),c.trigger("signup:anonymous",b)})},a.prototype.hasAccount=function(){return this.username!=null},a.prototype.hasAnonymousAccount=function(){return this.hoodie.config.get("_account.anonymousPassword")!=null},a.prototype.signIn=function(a,b){var c=this;return b==null&&(b=""),this.signOut().pipe(function(){return c._sendSignInRequest(a,b)})},a.prototype.signOut=function(){return this.hasAccount()?(this.hoodie.remote.disconnect(),this._sendSignOutRequest().pipe(this._cleanup)):this._cleanup()},a.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1account:$2"),this.hoodie.on(a,b)},a.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["account:"+a].concat(__slice.call(b)))},a.prototype.db=function(){return"user/"+this.ownerHash},a.prototype.fetch=function(a){var b=this;return a==null&&(a=this.username),a?this._withSingleRequest("fetch",function(){return b.hoodie.request("GET",b._url(a)).pipe(null,b._handleRequestError).done(function(a){return b._doc=a})}):this.hoodie.defer().reject({error:"unauthenticated",reason:"not logged in"}).promise()},a.prototype.changePassword=function(a,b){return this.username?(this.hoodie.remote.disconnect(),this.fetch().pipe(this._sendChangeUsernameAndPasswordRequest(a,null,b),this._handleRequestError)):this.hoodie.defer().reject({error:"unauthenticated",reason:"not logged in"}).promise()},a.prototype.resetPassword=function(a){var b,c,d,e,f=this;return(e=this.hoodie.config.get("_account.resetPasswordId"))?this._checkPasswordResetStatus():(e=""+a+"/"+this.hoodie.uuid(),this.hoodie.config.set("_account.resetPasswordId",e),c=""+this._prefix+":$passwordReset/"+e,b={_id:c,name:"$passwordReset/"+e,type:"user",roles:[],password:e,$createdAt:new Date,$updatedAt:new Date},d={data:JSON.stringify(b),contentType:"application/json"},this._withPreviousRequestsAborted("resetPassword",function(){return f.hoodie.request("PUT","/_users/"+encodeURIComponent(c),d).pipe(null,f._handleRequestError).done(f._checkPasswordResetStatus)}))},a.prototype.changeUsername=function(a,b){return this._changeUsernameAndPassword(a,b)},a.prototype.destroy=function(){return this.hasAccount()?this.fetch().pipe(this._handleFetchBeforeDestroySucces,this._handleRequestError).pipe(this._cleanup):this._cleanup()},a.prototype._prefix="org.couchdb.user",a.prototype._doc={},a.prototype._requests={},a.prototype._setUsername=function(a){return this.username=a,this.hoodie.config.set("_account.username",this.username)},a.prototype._setOwner=function(a){return this.ownerHash=a,this.hoodie.config.set("$createdBy",this.ownerHash),this.hoodie.config.set("_account.ownerHash",this.ownerHash)},a.prototype._handleAuthenticateSuccess=function(a){var b;return b=this.hoodie.defer(),a.userCtx.name?(this._authenticated=!0,this._setUsername(a.userCtx.name.replace(/^user(_anonymous)?\//,"")),this._setOwner(a.userCtx.roles[0]),b.resolve(this.username)):(this._authenticated=!1,this.trigger("error:unauthenticated"),b.reject()),b.promise()},a.prototype._handleRequestError=function(a){var b;a==null&&(a={});try{b=JSON.parse(a.responseText)}catch(c){b={error:a.responseText||"unknown"}}return this.hoodie.defer().reject(b).promise()},a.prototype._handleSignUpSucces=function(a,b){var c,d=this;return c=this.hoodie.defer(),function(c){return d.trigger("signup",a),d._doc._rev=c.rev,d._delayedSignIn(a,b)}},a.prototype._delayedSignIn=function(a,b){var c,d=this;return c=this.hoodie.defer(),window.setTimeout(function(){var e;return e=d._sendSignInRequest(a,b),e.done(c.resolve),e.fail(function(e){return e.error==="unconfirmed"?d._delayedSignIn(a,b):c.reject.apply(c,arguments)})},300),c.promise()},a.prototype._handleSignInSuccess=function(a){var b,c,d=this;return b=this.hoodie.defer(),c=a.name.replace(/^user(_anonymous)?\//,""),~a.roles.indexOf("error")?(this.fetch(c).fail(b.reject).done(function(){return b.reject({error:"error",reason:d._doc.$error})}),b.promise()):~a.roles.indexOf("confirmed")?(this._authenticated=!0,this._setOwner(a.roles[0]),this._setUsername(c),this.hasAnonymousAccount()?this.trigger("signin:anonymous",c):this.trigger("signin",c),this.fetch(),b.resolve(this.username,a.roles[0])):b.reject({error:"unconfirmed",reason:"account has not been confirmed yet"})},a.prototype._checkPasswordResetStatus=function(){var a,b,c,d,e,f=this;return c=this.hoodie.config.get("_account.resetPasswordId"),c?(e="$passwordReset/"+c,d="/_users/"+encodeURIComponent(""+this._prefix+":"+e),a=btoa(""+e+":"+c),b={headers:{Authorization:"Basic "+a}},this._withPreviousRequestsAborted("passwordResetStatus",function(){return f.hoodie.request("GET",d,b).pipe(f._handlePasswordResetStatusRequestSuccess,f._handlePasswordResetStatusRequestError).fail(function(a){if(a.error==="pending"){window.setTimeout(f._checkPasswordResetStatus,1e3);return}return f.trigger("password_reset:error")})})):this.hoodie.defer().reject({error:"missing"}).promise()},a.prototype._handlePasswordResetStatusRequestSuccess=function(a){var b;return b=this.hoodie.defer(),a.$error?b.reject(a.$error):b.reject({error:"pending"}),b.promise()},a.prototype._handlePasswordResetStatusRequestError=function(a){return a.status===401?(this.hoodie.config.remove("_account.resetPasswordId"),this.trigger("passwordreset"),this.hoodie.defer().resolve()):this._handleRequestError(a)},a.prototype._changeUsernameAndPassword=function(a,b,c){var d=this;return this._sendSignInRequest(this.username,a).pipe(function(){return d.fetch().pipe(d._sendChangeUsernameAndPasswordRequest(a,b,c))})},a.prototype._upgradeAnonymousAccount=function(a,b){var c,d=this;return c=this.hoodie.config.get("_account.anonymousPassword"),this._changeUsernameAndPassword(c,a,b).done(function(){return d.trigger("signup",a),d.hoodie.config.remove("_account.anonymousPassword")})},a.prototype._handleFetchBeforeDestroySucces=function(){var a=this;return this.hoodie.remote.disconnect(),this._doc._deleted=!0,this._withPreviousRequestsAborted("updateUsersDoc",function(){return a.hoodie.request("PUT",a._url(),{data:JSON.stringify(a._doc),contentType:"application/json"})})},a.prototype._cleanup=function(){return delete this.username,delete this._authenticated,this.hoodie.config.clear(),this.trigger("signout"),this._setOwner(this.hoodie.uuid()),this.hoodie.defer().resolve().promise()},a.prototype._userKey=function(a){return a===this.ownerHash?"user_anonymous/"+a:"user/"+a},a.prototype._key=function(a){return a==null&&(a=this.username),""+this._prefix+":"+this._userKey(a)},a.prototype._url=function(a){return"/_users/"+encodeURIComponent(this._key(a))},a.prototype._sendChangeUsernameAndPasswordRequest=function(a,b,c){var d=this;return function(){var e,f;return e=$.extend({},d._doc),b&&(e.$newUsername=b),c!=null&&(delete e.salt,delete e.password_sha,e.password=c),f={data:JSON.stringify(e),contentType:"application/json"},d._withPreviousRequestsAborted("updateUsersDoc",function(){return d.hoodie.request("PUT",d._url(),f).pipe(d._handleChangeUsernameAndPasswordRequest(b,c||a),d._handleRequestError)})}},a.prototype._handleChangeUsernameAndPasswordRequest=function(a,b){var c=this;return function(){return c.hoodie.remote.disconnect(),a?c._delayedSignIn(a,b):c.signIn(c.username,b)}},a.prototype._withPreviousRequestsAborted=function(a,b){var c;return(c=this._requests[a])!=null&&typeof c.abort=="function"&&c.abort(),this._requests[a]=b()},a.prototype._withSingleRequest=function(a,b){var c;return((c=this._requests[a])!=null?typeof c.state=="function"?c.state():void 0:void 0)==="pending"?this._requests[a]:this._requests[a]=b()},a.prototype._sendSignOutRequest=function(){var a=this;return this._withSingleRequest("signOut",function(){return a.hoodie.request("DELETE","/_session").pipe(null,a._handleRequestError)})},a.prototype._sendSignInRequest=function(a,b){var c,d=this;return c={data:{name:this._userKey(a),password:b}},this._withPreviousRequestsAborted("signIn",function(){var a;return a=d.hoodie.request("POST","/_session",c),a.pipe(d._handleSignInSuccess,d._handleRequestError)})},a}(),Hoodie.Config=function(){function a(a,b){var c=this;this.hoodie=a,b==null&&(b={}),this.clear=__bind(this.clear,this),b.$type&&(this.$type=b.$type),b.id&&(this.id=b.id),this.hoodie.store.find(this.$type,this.id).done(function(a){return c.cache=a}),this.hoodie.on("account:signedOut",this.clear)}return a.prototype.$type="$config",a.prototype.id="hoodie",a.prototype.cache={},a.prototype.set=function(a,b){var c,d;if(this.cache[a]===b)return;return this.cache[a]=b,d={},d[a]=b,c=a.charAt(0)==="_",this.hoodie.store.update(this.$type,this.id,d,{silent:c})},a.prototype.get=function(a){return this.cache[a]},a.prototype.clear=function(){return this.cache={},this.hoodie.store.remove(this.$type,this.id)},a.prototype.remove=a.prototype.set,a}(),Hoodie.Email=function(){function a(a){this.hoodie=a,this._handleEmailUpdate=__bind(this._handleEmailUpdate,this)}return a.prototype.send=function(a){var b,c,d=this;return a==null&&(a={}),c=this.hoodie.defer(),b=$.extend({},a),this._isValidEmail(a.to)?(this.hoodie.store.add("$email",b).then(function(a){return d._handleEmailUpdate(c,a)}),c.promise()):(b.error="Invalid email address ("+(b.to||"empty")+")",c.reject(b).promise())},a.prototype._isValidEmail=function(a){return a==null&&(a=""),/@/.test(a)},a.prototype._handleEmailUpdate=function(a,b){var c=this;return b==null&&(b={}),b.error?a.reject(b):b.deliveredAt?a.resolve(b):this.hoodie.remote.one("updated:$email:"+b.id,function(b){return c._handleEmailUpdate(a,b)})},a}(),Hoodie.extend("email",Hoodie.Email),Hoodie.Errors={INVALID_KEY:function(a){var b;return b=a.id?"id":"type",new Error("invalid "+b+" '"+a[b]+"': numbers and lowercase letters allowed only")},INVALID_ARGUMENTS:function(a){return new Error(a)},NOT_FOUND:function(a,b){return new Error(""+a+" with "+b+" could not be found")}},Hoodie.Remote=function(){function a(a,b){this.hoodie=a,b==null&&(b={}),this._handlePushSuccess=__bind(this._handlePushSuccess,this),this._handlePullResults=__bind(this._handlePullResults,this),this._handlePullError=__bind(this._handlePullError,this),this._handlePullSuccess=__bind(this._handlePullSuccess,this),this._restartPullRequest=__bind(this._restartPullRequest,this),this.sync=__bind(this.sync,this),this.push=__bind(this.push,this),this.pull=__bind(this.pull,this),this.stopSyncing=__bind(this.stopSyncing,this),this.startSyncing=__bind(this.startSyncing,this),this.disconnect=__bind(this.disconnect,this),this.connect=__bind(this.connect,this),b.name!=null&&(this.name=b.name,this.prefix=this.name),b.prefix!=null&&(this.prefix=b.prefix),b.sync&&(this._sync=b.sync),this.store=new Hoodie.RemoteStore(this.hoodie,this),this.isContinuouslySyncing()&&this.startSyncing()}return a.prototype.name=void 0,a.prototype._sync=!1,a.prototype.prefix="",a.prototype.request=function(a,b,c){c==null&&(c={}),this.name&&(b="/"+encodeURIComponent(this.name)+b),c.contentType||(c.contentType="application/json");if(a==="POST"||a==="PUT")c.dataType||(c.dataType="json"),c.processData||(c.processData=!1),c.data=JSON.stringify(c.data);return this.hoodie.request(a,b,c)},a.prototype.get=function(a,b){return console.log.apply(console,[".get() not yet implemented"].concat(__slice.call(arguments)))},a.prototype.post=function(a,b){return console.log.apply(console,[".post() not yet implemented"].concat(__slice.call(arguments)))},a.prototype.connect=function(a){return this.connected=!0,this.sync()},a.prototype.disconnect=function(){var a,b;return this.connected=!1,(a=this._pullRequest)!=null&&a.abort(),(b=this._pushRequest)!=null?b.abort():void 0},a.prototype.startSyncing=function(){return this._sync=!0,this.connect()},a.prototype.stopSyncing=function(){return this._sync=!1},a.prototype.isContinuouslyPulling=function(){var a;return this._sync===!0||((a=this._sync)!=null?a.pull:void 0)===!0},a.prototype.isContinuouslyPushing=function(){var a;return this._sync===!0||((a=this._sync)!=null?a.push:void 0)===!0},a.prototype.isContinuouslySyncing=function(){return this._sync===!0},a.prototype.getSinceNr=function(){return this._since||0},a.prototype.setSinceNr=function(a){return this._since=a},a.prototype.pull=function(){return this._pullRequest=this.request("GET",this._pullUrl()),this.connected&&this.isContinuouslyPulling()&&(window.clearTimeout(this._pullRequestTimeout),this._pullRequestTimeout=window.setTimeout(this._restartPullRequest,25e3)),this._pullRequest.then(this._handlePullSuccess,this._handlePullError)},a.prototype.push=function(a){var b,c,d,e;if(a!=null?!a.length:!void 0)return this.hoodie.defer().resolve([]).promise();c=[];for(d=0,e=a.length;d<e;d++)b=a[d],c.push(this.store.parseForRemote(b));return this._pushRequest=this.request("POST","/_bulk_docs",{data:{docs:c,new_edits:!1}}),this._pushRequest.done(this._handlePushSuccess(a,c))},a.prototype.sync=function(a){return this.push(a).pipe(this.pull)},a.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.name+":$2"),this.hoodie.on(a,b)},a.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.name+":$2"),this.hoodie.one(a,b)},a.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,[""+this.name+":"+a].concat(__slice.call(b)))},a.prototype._pullUrl=function(){var a;return a=this.getSinceNr(),this.isContinuouslyPulling()?"/_changes?include_docs=true&since="+a+"&heartbeat=10000&feed=longpoll":"/_changes?include_docs=true&since="+a},a.prototype._restartPullRequest=function(){var a;return(a=this._pullRequest)!=null?a.abort():void 0},a.prototype._handlePullSuccess=function(a){this.setSinceNr(a.last_seq),this._handlePullResults(a.results);if(this.connected&&this.isContinuouslyPulling())return this.pull()},a.prototype._handlePullError=function(a,b,c){if(!this.connected)return;switch(a.status){case 401:return this.trigger("error:unauthenticated",b),this.disconnect();case 404:return window.setTimeout(this.pull,3e3);case 500:return this.trigger("error:server",b),window.setTimeout(this.pull,3e3);default:if(!this.isContinuouslyPulling())return;return a.statusText==="abort"?this.pull():window.setTimeout(this.pull,3e3)}},a.prototype._knownObjects={},a.prototype._handlePullResults=function(a){var b,c,d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++)b=a[e].doc,d=this.store.parseFromRemote(b),d._deleted?(c="remove",delete this._knownObjects[b._id]):this._knownObjects[b._id]?c="update":(c="add",this._knownObjects[b._id]=1),this.trigger("store:"+c,d),this.trigger("store:"+c+":"+d.$type,d),this.trigger("store:"+c+":"+d.$type+":"+d.id,d),this.trigger("store:change",c,d),this.trigger("store:change:"+d.$type,c,d),g.push(this.trigger("store:change:"+d.$type+":"+d.id,c,d));return g},a.prototype._handlePushSuccess=function(a,b){},a}(),Hoodie.Share=function(){function a(a){var b;return this.hoodie=a,this._open=__bind(this._open,this),this.instance=Hoodie.ShareInstance,b=this._open,$.extend(b,this),this.hoodie.store.decoratePromises({shareAt:this._storeShareAt,unshareAt:this._storeUnshareAt,unshare:this._storeUnshare,share:this._storeShare}),b}return a.prototype.add=function(a){var b=this;return a==null&&(a={}),this.hoodie.store.add("$share",this._filterShareOptions(a)).pipe(function(a){return b.hoodie.account.hasAccount()||b.hoodie.account.anonymousSignUp(),new b.instance(b.hoodie,a)})},a.prototype.find=function(a){var b=this;return this.hoodie.store.find("$share",a).pipe(function(a){return new b.instance(b.hoodie,a)})},a.prototype.findAll=function(){var a=this;return this.hoodie.store.findAll("$share").pipe(function(b){var c,d,e,f;f=[];for(d=0,e=b.length;d<e;d++)c=b[d],f.push(new a.instance(a.hoodie,c));return f})},a.prototype.findOrAdd=function(a,b){var c=this;return this.hoodie.store.findOrAdd("$share",a,this._filterShareOptions(b)).pipe(function(a){return c.hoodie.account.hasAccount()||c.hoodie.account.anonymousSignUp(),new c.instance(c.hoodie,a)})},a.prototype.save=function(a,b){var c=this;return this.hoodie.store.save("$share",a,this._filterShareOptions(b)).pipe(function(a){return new c.instance(c.hoodie,a)})},a.prototype.update=function(a,b){var c=this;return this.hoodie.store.update("$share",a,this._filterShareOptions(b)).pipe(function(a){return new c.instance(c.hoodie,a)})},a.prototype.updateAll=function(a){var b=this;return this.hoodie.store.updateAll("$share",this._filterShareOptions(a)).pipe(function(a){var c,d,e,f;f=[];for(d=0,e=a.length;d<e;d++)c=a[d],f.push(new b.instance(b.hoodie,c));return f})},a.prototype.remove=function(a){return this.hoodie.store.findAll(function(b){return b.$shares[a]}).unshareAt(a),this.hoodie.store.remove("$share",a)},a.prototype.removeAll=function(){return this.hoodie.store.findAll(function(a){return a.$shares}).unshare(),this.hoodie.store.removeAll("$share")},a.prototype._allowedOptions=["id","access","$createdBy"],a.prototype._filterShareOptions=function(a){var b,c,d,e,f;a==null&&(a={}),b={},f=this._allowedOptions;for(d=0,e=f.length;d<e;d++)c=f[d],a.hasOwnProperty(c)&&(b[c]=a[c]);return b},a.prototype._open=function(a,b){return b==null&&(b={}),$.extend(b,{id:a}),new this.instance(this.hoodie,b)},a.prototype._storeShareAt=function(a,b){var c=this;return this.pipe(function(d){var e,f,g,h,i;f=function(d){return d.$shares||(d.$shares={}),d.$shares[a]=b||!0,c.hoodie.store.update(d.$type,d.id,{$shares:d.$shares}),d};if($.isArray(d)){i=[];for(g=0,h=d.length;g<h;g++)e=d[g],i.push(f(e));return i}return f(d)})},a.prototype._storeUnshareAt=function(a){var b=this;return this.pipe(function(c){var d,e,f,g,h;e=function(c){return!c.$shares||!c.$shares[a]?c:(c.$shares[a]=!1,b.hoodie.store.update(c.$type,c.id,{$shares:c.$shares}),c)};if($.isArray(c)){h=[];for(f=0,g=c.length;f<g;f++)d=c[f],h.push(e(d));return h}return e(c)})},a.prototype._storeUnshare=function(){var a=this;return this.pipe(function(b){var c,d,e,f,g;d=function(b){var c;if(!b.$shares)return b;for(c in b.$shares)b.$shares[c]=!1;return a.hoodie.store.update(b.$type,b.id,{$shares:b.$shares}),b};if($.isArray(b)){g=[];for(e=0,f=b.length;e<f;e++)c=b[e],g.push(d(c));return g}return d(b)})},a.prototype._storeShare=function(a){var b=this;return this.pipe(function(c){return b.hoodie.share.add().pipe(function(d){var e,f,g;return f=function(c){return c.$shares||(c.$shares={}),c.$shares[d.id]=a||!0,b.hoodie.store.update(c.$type,c.id,{$shares:c.$shares}),c},g=function(){var a,b,d;if($.isArray(c)){d=[];for(a=0,b=c.length;a<b;a++)e=c[a],d.push(f(e));return d}return f(c)}(),b.hoodie.defer().resolve(g,d).promise()})})},a}(),Hoodie.extend("share",Hoodie.Share),Hoodie.Store=function(){function a(a){this.hoodie=a}return a.prototype.save=function(a,b,c,d){var e;return d==null&&(d={}),e=this.hoodie.defer(),typeof c!="object"?(e.reject(Hoodie.Errors.INVALID_ARGUMENTS("object is "+typeof c)),e.promise()):b&&!this._isValidId(b)?e.reject(Hoodie.Errors.INVALID_KEY({id:b})).promise():this._isValidType(a)?e:e.reject(Hoodie.Errors.INVALID_KEY({type:a})).promise()},a.prototype.add=function(a,b,c){return b==null&&(b={}),c==null&&(c={}),this.save(a,b.id,b)},a.prototype.update=function(a,b,c,d){var e,f,g=this;return e=this.hoodie.defer(),f=this.find(a,b).pipe(function(f){var h,i,j;return typeof c=="function"&&(c=c($.extend({},f))),c?(h=function(){var a;a=[];for(i in c){j=c[i];if(f[i]===j)continue;f[i]=j,a.push(i)}return a}(),!h.length&&!d?e.resolve(f):g.save(a,b,f,d).then(e.resolve,e.reject)):e.resolve(f)}),f.fail(function(){return g.save(a,b,c,d).then(e.resolve,e.reject)}),e.promise()},a.prototype.updateAll=function(a,b,c){var d,e=this;c==null&&(c={});switch(!0){case typeof a=="string":d=this.findAll(a);break;case this.hoodie.isPromise(a):d=a;break;case $.isArray(a):d=this.hoodie.defer().resolve(a).promise();break;default:d=this.findAll()}return d.pipe(function(a){var d,f,g;return d=e.hoodie.defer(),$.isArray(a)||(a=[a]),g=function(){var d,e,g;g=[];for(d=0,e=a.length;d<e;d++)f=a[d],g.push(this.update(f.$type,f.id,b,c));return g}.call(e),$.when.apply(null,g).then(d.resolve),d.promise()})},a.prototype.find=function(a,b){var c;return c=this.hoodie.defer(),typeof a!="string"||typeof b!="string"?c.reject(Hoodie.Errors.INVALID_ARGUMENTS("type & id are required")).promise():c},a.prototype.findOrAdd=function(a,b,c){var d,e=this;return c==null&&(c={}),d=this.hoodie.defer(),this.find(a,b).done(d.resolve).fail(function(){var f;return f=$.extend({id:b},c),e.add(a,f).then(d.resolve,d.reject)}),d.promise()},a.prototype.findAll=function(){return this.hoodie.defer()},a.prototype.remove=function(a,b,c){var d;return c==null&&(c={}),d=this.hoodie.defer(),typeof a!="string"||typeof b!="string"?d.reject(Hoodie.Errors.INVALID_ARGUMENTS("type & id are required")).promise():d},a.prototype.removeAll=function(a,b){var c=this;return b==null&&(b={}),this.findAll(a).pipe(function(a){var d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++)d=a[e],g.push(c.remove(d.$type,d.id,b));return g})},a.prototype._now=function(){return new Date},a.prototype._isValidId=function(a){return/^[a-z0-9\-]+$/.test(a)},a.prototype._isValidType=function(a){return/^[a-z$][a-z0-9]+$/.test(a)},a}(),Hoodie.User=function(){function a(a){var b=this;return this.hoodie=a,this.hoodie.store.decoratePromises({publish:this._storePublish,unpublish:this._storeUnpublish}),function(a,c){return c==null&&(c={}),$.extend(c,{prefix:"$public"}),b.hoodie.open("user/"+a+"/public",c)}}return a.prototype._storePublish=function(a){var b=this;return this.pipe(function(c){var d,e,f,g;$.isArray(c)||(c=[c]),g=[];for(e=0,f=c.length;e<f;e++)d=c[e],g.push(b.hoodie.store.update(d.$type,d.id,{$public:a||!0}));return g})},a.prototype._storeUnpublish=function(){var a=this;return this.pipe(function(b){var c,d,e,f;$.isArray(b)||(b=[b]),f=[];for(d=0,e=b.length;d<e;d++)c=b[d],c.$public&&f.push(a.hoodie.store.update(c.$type,c.id,{$public:!1}));return f})},a}(),Hoodie.extend("user",Hoodie.User),Hoodie.Global=function(){function a(a){return a.open("global")}return a}(),Hoodie.extend("global",Hoodie.Global),Hoodie.AccountRemote=function(a){function b(a,c){this.hoodie=a,c==null&&(c={}),this._handlePullResults=__bind(this._handlePullResults,this),this._handlePushSuccess=__bind(this._handlePushSuccess,this),this._handleSignIn=__bind(this._handleSignIn,this),this.push=__bind(this.push,this),this.sync=__bind(this.sync,this),this.stopSyncing=__bind(this.stopSyncing,this),this.startSyncing=__bind(this.startSyncing,this),this.connect=__bind(this.connect,this),this.name=this.hoodie.account.db(),this.hoodie.config.get("_remote.sync")!=null&&(this._sync=this.hoodie.config.get("_remote.sync")),c.prefix="",b.__super__.constructor.call(this,this.hoodie,c)}return __extends(b,a),b.prototype._sync=!0,b.prototype.connect=function(){var a=this;return this.hoodie.account.authenticate().pipe(function(){return b.__super__.connect.apply(a,arguments)})},b.prototype.disconnect=function(){return this.hoodie.unbind("store:idle",this.push),b.__super__.disconnect.apply(this,arguments)},b.prototype.startSyncing=function(){return this.hoodie.config.set("_remote.sync",!0),this.hoodie.on("account:signin",this._handleSignIn),this.hoodie.on("account:signout",this.disconnect),b.__super__.startSyncing.apply(this,arguments)},b.prototype.stopSyncing=function(){return this.hoodie.config.set("_remote.sync",!1),this.hoodie.unbind("account:signin",this._handleSignIn),this.hoodie.unbind("account:signout",this.disconnect),b.__super__.stopSyncing.apply(this,arguments)},b.prototype.sync=function(a){return this.isContinuouslyPushing()&&(this.hoodie.unbind("store:idle",this.push),this.hoodie.on("store:idle",this.push)),b.__super__.sync.apply(this,arguments)},b.prototype.getSinceNr=function(a){return this.hoodie.config.get("_remote.since")||0},b.prototype.setSinceNr=function(a){return this.hoodie.config.set("_remote.since",a)},b.prototype.push=function(a){var c;return $.isArray(a)||(a=this.hoodie.store.changedDocs()),c=b.__super__.push.call(this,a)},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1remote:$2"),this.hoodie.on(a,b)},b.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1remote:$2"),this.hoodie.one(a,b)},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["remote:"+a].concat(__slice.call(b)))},b.prototype._handleSignIn=function(){return this.name=this.hoodie.account.db(),this.connect()},b.prototype._handlePushSuccess=function(a,b){var c=this;return function(){var d,e,f,g,h,i,j;j=[];for(e=h=0,i=a.length;h<i;e=++h)d=a[e],g={_rev:b[e]._rev},f={remote:!0},j.push(c.hoodie.store.update(d.$type,d.id,g,f));return j}},b.prototype._handlePullResults=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=this;m=[],d=[];for(e=0,h=a.length;e<h;e++)b=a[e].doc,b=this.store.parseFromRemote(b),b._deleted?m.push([b,this.hoodie.store.remove(b.$type,b.id,{remote:!0})]):d.push([b,this.hoodie.store.save(b.$type,b.id,b,{remote:!0})]);for(f=0,i=m.length;f<i;f++)k=m[f],b=k[0],c=k[1],c.then(function(a){return o.trigger("remove",a),o.trigger("remove:"+b.$type,a),o.trigger("remove:"+b.$type+":"+b.id,a),o.trigger("change","remove",a),o.trigger("change:"+b.$type,"remove",a),o.trigger("change:"+b.$type+":"+b.id,"remove",a)});n=[];for(g=0,j=d.length;g<j;g++)l=d[g],b=l[0],c=l[1],n.push(c.then(function(a,c){var d;d=c?"create":"update",o.trigger(d,a),o.trigger(""+d+":"+b.$type,a),d!=="create"&&o.trigger(""+d+":"+b.$type+":"+b.id,a),o.trigger("change",d,a),o.trigger("change:"+b.$type,d,a);if(d!=="create")return o.trigger("change:"+b.$type+":"+b.id,d,a)}));return n},b}(Hoodie.Remote),Hoodie.LocalStore=function(a){function b(a){this.hoodie=a,this.clear=__bind(this.clear,this),this.markAllAsChanged=__bind(this.markAllAsChanged,this),this.isPersistent()||(this.db={getItem:function(){return null},setItem:function(){return null},removeItem:function(){return null},key:function(){return null},length:0,clear:function(){return null}}),this.hoodie.on("account:signout",this.clear),this.hoodie.on("account:signup",this.markAllAsChanged),this._promiseApi.hoodie=this.hoodie,this._bootstrap()}return __extends(b,a),b.prototype.idleTimeout=2e3,b.prototype.db={getItem:function(a){return window.localStorage.getItem(a)},setItem:function(a,b){return window.localStorage.setItem(a,b)},removeItem:function(a){return window.localStorage.removeItem(a)},key:function(a){return window.localStorage.key(a)},length:function(){return window.localStorage.length},clear:function(){return window.localStorage.clear()}},b.prototype.save=function(a,c,d,e){var f,g,h,i,j;e==null&&(e={}),g=b.__super__.save.apply(this,arguments);if(this.hoodie.isPromise(g))return this._decoratePromise(g);d=$.extend(!0,{},d),c?(f=this.cache(a,c),i=typeof f!="object"):(i=!0,c=this.hoodie.uuid()),i&&this.hoodie.account&&(d.$createdBy||(d.$createdBy=this.hoodie.account.ownerHash));if(!i){delete d.$updatedBy;for(j in f)if(!d.hasOwnProperty(j))switch(j.charAt(0)){case"_":e.remote&&(d[j]=f[j]);break;case"$":e.remote||(d[j]=f[j])}}e.remote?d._$syncedAt=this._now():e.silent||(d.$updatedAt=this._now(),d.$createdAt||(d.$createdAt=d.$updatedAt));try{d=this.cache(a,c,d,e),g.resolve(d,i).promise(),h=i?"add":"update",this._triggerEvents(h,d,e)}catch(k){g.reject(k).promise()}return this._decoratePromise(g.promise())},b.prototype.find=function(a,c){var d,e;d=b.__super__.find.apply(this,arguments);if(this.hoodie.isPromise(d))return this._decoratePromise(d);try{e=this.cache(a,c),e||d.reject(Hoodie.Errors.NOT_FOUND(a,c)).promise(),d.resolve(e)}catch(f){d.reject(f)}return this._decoratePromise(d.promise())},b.prototype.findAll=function(a){var c,d,e,f,g,h,i,j;a==null&&(a=function(){return!0}),d=b.__super__.findAll.apply(this,arguments);if(this.hoodie.isPromise(d))return this._decoratePromise(d);g=this._index(),typeof a=="string"&&(j=a,a=function(a){return a.$type===j});try{i=function(){var b,d,i,j;j=[];for(b=0,d=g.length;b<d;b++){f=g[b];if(!this._isSemanticId(f))continue;i=f.split("/"),c=i[0],e=i[1],h=this.cache(c,e);if(!h||!a(h))continue;j.push(h)}return j}.call(this),d.resolve(i).promise()}catch(k){d.reject(k).promise()}return this._decoratePromise(d.promise())},b.prototype.remove=function(a,c,d){var e,f,g,h;return d==null&&(d={}),e=b.__super__.remove.apply(this,arguments),this.hoodie.isPromise(e)?this._decoratePromise(e):(g=this.cache(a,c),g?(g._$syncedAt&&!d.remote?(g._deleted=!0,this.cache(a,c,g)):(f=""+a+"/"+c,this.db.removeItem(f),this._cached[f]=!1,this.clearChanged(a,c)),this._triggerEvents("remove",g,d),h=e.resolve($.extend(!0,{},g)).promise(),this._decoratePromise(h)):this._decoratePromise(e.reject(Hoodie.Errors.NOT_FOUND(a,c)).promise()))},b.prototype.update=function(){return this._decoratePromise(b.__super__.update.apply(this,arguments))},b.prototype.updateAll=function(){return this._decoratePromise(b.__super__.updateAll.apply(this,arguments))},b.prototype.removeAll=function(){return this._decoratePromise(b.__super__.removeAll.apply(this,arguments))},b.prototype.cache=function(a,b,c,d){var e;c==null&&(c=!1),d==null&&(d={}),e=""+a+"/"+b;if(c){$.extend(!0,c,{$type:a,id:b}),this._setObject(a,b,c);if(d.remote)return this.clearChanged(a,b),this._cached[e]=c,$.extend(!0,{},this._cached[e])}else{if(this._cached[e]===!1)return!1;if(this._cached[e])return $.extend(!0,{},this._cached[e]);c=this._getObject(a,b)}if(c===void 0)return;return c===!1?(this.clearChanged(a,b),this._cached[e]=!1,!1):this._isMarkedAsDeleted(c)?(this.markAsChanged(a,b,c,d),this._cached[e]=!1,!1):(this._cached[e]=c,this._isDirty(c)?this.markAsChanged(a,b,c,d):this.clearChanged(a,b),$.extend(!0,{},this._cached[e]))},b.prototype.clearChanged=function(a,b){var c;return a&&b?(c=""+a+"/"+b,delete this._dirty[c]):this._dirty={},this._saveDirtyIds(),window.clearTimeout(this._dirtyTimeout)},b.prototype.isMarkedAsDeleted=function(a,b){return this._isMarkedAsDeleted(this.cache(a,b))},b.prototype.markAsChanged=function(a,b,c,d){var e;d==null&&(d={}),e=""+a+"/"+b,this._dirty[e]=c,this._saveDirtyIds();if(d.silent)return;return this._trigger_dirty_and_idle_events()},b.prototype.markAllAsChanged=function(){var a=this;return this.findAll().pipe(function(b){var c,d,e,f;for(e=0,f=b.length;e<f;e++)d=b[e],c=""+d.$type+"/"+d.id,a._dirty[c]=d;return a._saveDirtyIds(),a._trigger_dirty_and_idle_events()})},b.prototype.changedDocs=function(){var a,b,c,d,e,f,g;e=this._dirty,g=[];for(b in e)c=e[b],f=b.split("/"),d=f[0],a=f[1],c.$type=d,c.id=a,g.push(c);return g},b.prototype.isDirty=function(a,b){return a?this._isDirty(this.cache(a,b)):$.isEmptyObject(this._dirty)},b.prototype.clear=function(){var a;a=this.hoodie.defer();try{this.db.clear(),this._cached={},this.clearChanged(),a.resolve(),this.trigger("clear")}catch(b){a.reject(b)}return a.promise()},b.prototype.isPersistent=function(){try{if(!window.localStorage)return!1;localStorage.setItem("Storage-Test","1");if(localStorage.getItem("Storage-Test")!=="1")return!1;localStorage.removeItem("Storage-Test")}catch(a){return!1}return!0},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["store:"+a].concat(__slice.call(b)))},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1store:$2"),this.hoodie.on(a,b)},b.prototype.decoratePromises=function(a){return $.extend(this._promiseApi,a)},b.prototype._bootstrap=function(){var a,b,c,d,e,f,g,h,i;c=this.db.getItem("_dirty");if(!c)return;i=[];for(f=0,g=c.length;f<g;f++)b=c[f],h=b.split("/"),e=h[0],a=h[1],i.push(d=this.cache(e,a));return i},b.prototype._setObject=function(a,b,c){var d,e;return d=""+a+"/"+b,e=$.extend({},c),delete e.$type,delete e.id,this.db.setItem(d,JSON.stringify(e))},b.prototype._getObject=function(a,b){var c,d,e;return d=""+a+"/"+b,c=this.db.getItem(d),c?(e=JSON.parse(c),e.$type=a,e.id=b,e.$createdAt&&(e.$createdAt=new Date(Date.parse(e.$createdAt))),e.$updatedAt&&(e.$updatedAt=new Date(Date.parse(e.$updatedAt))),e._$syncedAt&&(e._$syncedAt=new Date(Date.parse(e._$syncedAt))),e):!1},b.prototype._saveDirtyIds=function(){var a;return $.isEmptyObject(this._dirty)?this.db.removeItem("_dirty"):(a=Object.keys(this._dirty),this.db.setItem("_dirty",a.join(",")))},b.prototype._now=function(){return new Date},b.prototype._isValidId=function(a){return/^[a-z0-9\-]+$/.test(a)},b.prototype._isValidType=function(a){return/^[a-z$][a-z0-9]+$/.test(a)},b.prototype._isSemanticId=function(a){return/^[a-z$][a-z0-9]+\/[a-z0-9]+$/.test(a)},b.prototype._cached={},b.prototype._dirty={},b.prototype._isDirty=function(a){return a.$updatedAt?a._$syncedAt?a._$syncedAt.getTime()<a.$updatedAt.getTime():!0:!1},b.prototype._isMarkedAsDeleted=function(a){return a._deleted===!0},b.prototype._index=function(){var a,b,c,d;d=[];for(a=b=0,c=this.db.length();0<=c?b<c:b>c;a=0<=c?++b:--b)d.push(this.db.key(a));return d},b.prototype._triggerEvents=function(a,b,c){this.trigger(a,b,c),this.trigger(""+a+":"+b.$type,b,c),a!=="new"&&this.trigger(""+a+":"+b.$type+":"+b.id,b,c),this.trigger("change",a,b,c),this.trigger("change:"+b.$type,a,b,c);if(a!=="new")return this.trigger("change:"+b.$type+":"+b.id,a,b,c)},b.prototype._trigger_dirty_and_idle_events=function(){var a=this;return this.trigger("dirty"),window.clearTimeout(this._dirtyTimeout),this._dirtyTimeout=window.setTimeout(function(){return a.trigger("idle")},this.idleTimeout)},b.prototype._promiseApi={},b.prototype._decoratePromise=function(a){return $.extend(a,this._promiseApi)},b}(Hoodie.Store),Hoodie.RemoteStore=function(a){function b(a,b){this.hoodie=a,this.remote=b,this._mapDocsFromFindAll=__bind(this._mapDocsFromFindAll,this),this.parseAllFromRemote=__bind(this.parseAllFromRemote,this),this.parseFromRemote=__bind(this.parseFromRemote,this)}return __extends(b,a),b.prototype.find=function(a,c){var d,e;return d=b.__super__.find.apply(this,arguments),this.hoodie.isPromise(d)?d:(e="/"+encodeURIComponent(""+a+"/"+c),this.remote.request("GET",e).pipe(this.parseFromRemote))},b.prototype.findAll=function(a){var c,d,e,f;c=b.__super__.findAll.apply(this,arguments);if(this.hoodie.isPromise(c))return c;e="/_all_docs?include_docs=true";switch(!0){case a!=null&&this.remote.prefix!=="":d=""+this.remote.prefix+"/"+a;break;case a!=null:d=a;break;case this.remote.prefix!=="":d=this.remote.prefix;break;default:d=""}return d&&(e=""+e+'&startkey="'+d+'/"&endkey="'+d+'0"'),f=this.remote.request("GET",e),f.fail(c.reject),f.pipe(this._mapDocsFromFindAll).pipe(this.parseAllFromRemote).done(c.resolve),c.promise()},b.prototype.save=function(a,c,d){var e,f,g;return e=b.__super__.save.apply(this,arguments),this.hoodie.isPromise(e)?e:(c||(c=this.hoodie.uuid()),d=$.extend({$type:a,id:c},d),f=this.parseForRemote(d),g="/"+encodeURIComponent(f._id),this.remote.request("PUT",g,{data:f}))},b.prototype.remove=function(a,b){return this.update(a,b,{_deleted:!0})},b.prototype.removeAll=function(a){return this.updateAll(a,{_deleted:!0})},b.prototype.parseForRemote=function(a){var b,c;c=$.extend({},a);for(b in c){if(~this._validSpecialAttributes.indexOf(b))continue;if(!/^_/.test(b))continue;delete c[b]}return c._id=""+c.$type+"/"+c.id,this.remote.prefix&&(c._id=""+this.remote.prefix+"/"+c._id),delete c.id,this._addRevisionTo(c),c},b.prototype.parseFromRemote=function(a){var b,c;return b=a._id||a.id,delete a._id,this.remote.prefix&&(b=b.replace(RegExp("^"+this.remote.prefix+"/"),"")),c=b.split(/\//),a.$type=c[0],a.id=c[1],a.$createdAt&&(a.$createdAt=new Date(Date.parse(a.$createdAt))),a.$updatedAt&&(a.$updatedAt=new Date(Date.parse(a.$updatedAt))),a.rev&&(a._rev=a.rev,delete a.rev),a},b.prototype.parseAllFromRemote=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(this.parseFromRemote(b));return e},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.remote.name+":store:$2"),this.hoodie.on(a,b)},b.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.remote.name+":store:$2"),this.hoodie.one(a,b)},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,[""+this.remote.name+":store:"+a].concat(__slice.call(b)))},b.prototype._validSpecialAttributes=["_id","_rev","_deleted","_revisions","_attachments"],b.prototype._generateNewRevisionId=function(){return this.hoodie.uuid(9)},b.prototype._addRevisionTo=function(a){var b,c,d,e;try{e=a._rev.split(/-/),c=e[0],b=e[1]}catch(f){}c=parseInt(c,10)||0,d=this._generateNewRevisionId(),a._rev=""+(c+1)+"-"+d,a._revisions={start:1,ids:[d]};if(b)return a._revisions.start+=c,a._revisions.ids.push(b)},b.prototype._mapDocsFromFindAll=function(a){return a.rows.map(function(a){return a.doc})},b}(Hoodie.Store),Hoodie.ShareInstance=function(a){function b(a,c){this.hoodie=a,c==null&&(c={}),this._handleSecurityResponse=__bind(this._handleSecurityResponse,this),this.id=c.id||this.hoodie.uuid(),this.name="share/"+this.id,this.prefix=this.name,c.sync!=null&&(c._sync=c.sync,delete c.sync),$.extend(this,c),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.access=!1,b.prototype.subscribe=function(){return this.request("GET","/_security").pipe(this._handleSecurityResponse)},b.prototype.unsubscribe=function(){return this.hoodie.share.remove(this.id),this},b.prototype.grantReadAccess=function(a){var b,c,d,e;if(this.access===!0||this.access.read===!0)return this.hoodie.resolveWith(this);typeof a=="string"&&(a=[a]);if(this.access===!1||this.access.read===!1)this.access.read!=null?this.access.read=a||!0:this.access=a||!0;if(a){b=this.access.read||this.access;for(d=0,e=a.length;d<e;d++)c=a[d],b.indexOf(c)===-1&&b.push(c);this.access.read!=null?this.access.read=b:this.access=b}else this.access.read!=null?this.access.read=!0:this.access=!0;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype.revokeReadAccess=function(a){var b,c,d,e,f,g;this.revokeWriteAccess(a);if(this.access===!1||this.access.read===!1)return this.hoodie.resolveWith(this);if(a){if(this.access===!0||this.access.read===!0)return this.hoodie.rejectWith(this);typeof a=="string"&&(a=[a]),c=this.access.read||this.access,b=!1;for(f=0,g=a.length;f<g;f++)e=a[f],d=c.indexOf(e),d!==-1&&(c.splice(d,1),b=!0);if(!b)return this.hoodie.resolveWith(this);c.length===0&&(c=!1),this.access.read!=null?this.access.read=c:this.access=c}else this.access=!1;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype.grantWriteAccess=function(a){return this.grantReadAccess(a),this.access.read==null&&(this.access={read:this.access}),this.access.write===!0?this.hoodie.resolveWith(this):(a?(typeof a=="string"&&(a=[a]),this.access.write=a):this.access.write=!0,this.hoodie.share.update(this.id,{access:this.access}))},b.prototype.revokeWriteAccess=function(a){var b,c,d,e;if(this.access.write==null)return this.hoodie.resolveWith(this);if(a){if(typeof this.access.write=="boolean")return this.hoodie.rejectWith(this);typeof a=="string"&&(a=[a]);for(d=0,e=a.length;d<e;d++)c=a[d],b=this.access.write.indexOf(c),b!==-1&&this.access.write.splice(b,1);this.access.write.length===0&&(this.access=this.access.read)}else this.access=this.access.read;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype._handleSecurityResponse=function(a){var b,c;return c=this._parseSecurity(a),b="$subscription",this.hoodie.share.findOrAdd(this.id,{access:c,$createdBy:b})},b.prototype._parseSecurity=function(a){var b,c,d,e,f;return c=(e=a.members)!=null?e.roles:void 0,d=(f=a.writers)!=null?f.roles:void 0,b={},c!=null&&(b.read=c===!0||c.length===0,c.length&&(b.read=-1!==c.indexOf(this.hoodie.account.ownerHash))),d!=null&&(b.write=d===!0||d.length===0,d.length&&(b.write=-1!==d.indexOf(this.hoodie.account.ownerHash))),b},b}(Hoodie.Remote),function(){var a;a=function(){function a(a){var b=this;this.hoodie=a,this.users={findAll:function(a){var c;return c=[{name:"hello@alex.com",lastLogin:"2013-01-21T16:07:20.574Z",signedUpAt:"2013-01-18T16:07:20.574Z",state:"confirmed"},{name:"hello@gregor.com",lastLogin:"2013-01-16T16:07:20.574Z",signedUpAt:"2013-01-15T16:07:20.574Z",state:"new"},{name:"hello@jan.com",lastLogin:"2013-01-01T16:07:20.574Z",signedUpAt:"2012-12-20T16:07:20.574Z",state:"deleted"}],b.hoodie.resolveWith(c).promise()},search:function(){}},this.config={get:function(){},set:function(){}},this.on=function(){},this.logs={findAll:function(){}},this.stats=function(a){var b,c;c={signups:12,account_deletions:1,users_active:1302,users_total:4211,growth:.04,active:-0.02,since:a};if(!a)for(b in c)c[b]=c[b]*17;return this.hoodie.resolveWith(c).promise()},this.modules=function(a){var b,c;c={signups:12,account_deletions:1,users_active:1302,users_total:4211,growth:.04,active:-0.02,since:a};if(!a)for(b in stats)stats[b]=stats[b]*17;return this.hoodie.resolveWith(stats).promise()}}return a}(),Hoodie.extend("admin",a)}.call(this),function(a,b){function c(a){return new d(a)}function d(a){if(a&&a.__wrapped__)return a;this.__wrapped__=a}function e(a,b){return function(c,d,e){return a.call(b,c,d,e)}}function f(a,b,c){b||(b=0);var d=a.length,e=d-b>=(c||K),f=e?{}:a;if(e)for(var g=b-1;++g<d;)c=a[g]+"",(Z.call(f,c)?f[c]:f[c]=[]).push(a[g]);return function(a){if(e){var c=a+"";return Z.call(f,c)&&-1<v(f[c],a)}return-1<v(f,a,b)}}function g(a,c){var d=a.b,e=c.b,a=a.a,c=c.a;if(a!==c){if(a>c||a===b)return 1;if(a<c||c===b)return-1}return d<e?-1:1}function h(a,b,c){function d(){var h=arguments,i=f?this:b;return e||(a=b[g]),c.length&&(h=h.length?c.concat(ab.call(h)):c),this instanceof d?(l.prototype=a.prototype,i=new l,(h=a.apply(i,h))&&Kb[typeof h]?h:i):a.apply(i,h)}var e=o(a),f=!c,g=a;return f&&(c=b),d}function i(){for(var a,b,c,d=-1,f=arguments.length,h={e:"",f:"",j:"",q:"",c:{d:""},m:{d:""}};++d<f;)for(b in a=arguments[d],a)c=(c=a[b])==E?"":c,/d|i/.test(b)?("string"==typeof c&&(c={b:c,l:c}),h.c[b]=c.b||"",h.m[b]=c.l||""):h[b]=c;a=h.a,b=/^[^,]+/.exec(a)[0],c=h.s,h.g=b,h.h=ub,h.k=Eb,h.n=xb,h.p=X,h.r=h.r!==F,h.s=c==E?Fb:c,h.o==E&&(h.o=Ab),h.f||(h.f="if(!"+b+")return u");if("e"!=b||!h.c.i)h.c=E;b="",h.s&&(b+="'use strict';"),b+="var j,A,k="+h.g+",u",h.j&&(b+="="+h.j),b+=";"+h.f+";"+h.q+";",h.c&&(b+="var l=k.length;j=-1;",h.m&&(b+="if(l===+l){"),h.o&&(b+="if(z.call(k)==x){k=k.split('')}"),b+=h.c.d+";while(++j<l){A=k[j];"+h.c.i+"}",h.m&&(b+="}"));if(h.m){h.c?b+="else{":h.n&&(b+="var l=k.length;j=-1;if(l&&O(k)){while(++j<l){A=k[j+=''];"+h.m.i+"}}else{"),h.h||(b+="var v=typeof k=='function'&&r.call(k,'prototype');");if(h.k&&h.r)b+="var o=-1,p=X[typeof k]?m(k):[],l=p.length;"+h.m.d+";while(++o<l){j=p[o];",h.h||(b+="if(!(v&&j=='prototype')){"),b+="A=k[j];"+h.m.i+"",h.h||(b+="}");else{b+=h.m.d+";for(j in k){";if(!h.h||h.r)b+="if(",h.h||(b+="!(v&&j=='prototype')"),!h.h&&h.r&&(b+="&&"),h.r&&(b+="h.call(k,j)"),b+="){";b+="A=k[j];"+h.m.i+";";if(!h.h||h.r)b+="}"}b+="}";if(h.h){b+="var g=k.constructor;";for(c=0;7>c;c++)b+="j='"+h.p[c]+"';if(","constructor"==h.p[c]&&(b+="!(g&&g.prototype===k)&&"),b+="h.call(k,j)){A=k[j];"+h.m.i+"}"}if(h.c||h.n)b+="}"}return b+=h.e+";return u",Function("D,E,F,c,I,f,J,h,i,M,O,Q,S,T,W,X,m,r,w,x,z","var G=function("+a+"){"+b+"};return G")(Gb,H,A,e,g,Y,$b,Z,B,v,n,Vb,o,Wb,pb,Kb,gb,_,ab,rb,bb)}function j(a){return"\\"+Lb[a]}function k(a){return Ib[a]}function l(){}function m(a){return Jb[a]}function n(a){return bb.call(a)==kb}function o(a){return"function"==typeof a}function p(a,b){var c=F;if(!a||"object"!=typeof a||!b&&n(a))return c;var d=a.constructor;return(!Bb||"function"==typeof a.toString||"string"!=typeof (a+""))&&(!o(d)||d instanceof d)?wb?($b(a,function(a,b,d){return c=!Z.call(d,b),F}),c===F):($b(a,function(a,b){c=b}),c===F||Z.call(a,c)):c}function q(a,b,c,d,e){if(a==E)return a;c&&(b=F);if(c=Kb[typeof a]){var f=bb.call(a);if(!Hb[f]||yb&&n(a))return a;var g=f==lb,c=g||(f==pb?Wb(a,D):c)}if(!c||!b)return c?g?ab.call(a):Zb({},a):a;c=a.constructor;switch(f){case mb:return new c(a==D);case nb:return new c(+a);case ob:case rb:return new c(a);case qb:return c(a.source,R.exec(a))}d||(d=[]),e||(e=[]);for(f=d.length;f--;)if(d[f]==a)return e[f];var h=g?c(f=a.length):{};d.push(a),e.push(h);if(g)for(g=-1;++g<f;)h[g]=q(a[g],b,E,d,e);else _b(a,function(a,c){h[c]=q(a,b,E,d,e)});return h}function r(a,b,c,d){if(a==E||b==E)return a===b;if(a===b)return 0!==a||1/a==1/b;if(Kb[typeof a]||Kb[typeof b])a=a.__wrapped__||a,b=b.__wrapped__||b;var e=bb.call(a);if(e!=bb.call(b))return F;switch(e){case mb:case nb:return+a==+b;case ob:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case qb:case rb:return a==b+""}var f=Gb[e];if(yb&&!f&&(f=n(a))&&!n(b)||!f&&(e!=pb||Bb&&("function"!=typeof a.toString&&"string"==typeof (a+"")||"function"!=typeof b.toString&&"string"==typeof (b+""))))return F;c||(c=[]),d||(d=[]);for(e=c.length;e--;)if(c[e]==a)return d[e]==b;var e=-1,g=D,h=0;c.push(a),d.push(b);if(f){h=a.length;if(g=h==b.length)for(;h--&&(g=r(a[h],b[h],c,d)););return g}f=a.constructor,g=b.constructor;if(f!=g&&(!o(f)||!(f instanceof f&&o(g)&&g instanceof g)))return F;for(var i in a)if(Z.call(a,i)&&(h++,!Z.call(b,i)||!r(a[i],b[i],c,d)))return F;for(i in b)if(Z.call(b,i)&&!(h--))return F;if(ub)for(;7>++e;)if(i=X[e],Z.call(a,i)&&(!Z.call(b,i)||!r(a[i],b[i],c,d)))return F;return D}function s(a,b,c,d){if(!a)return c;var f=a.length,g=3>arguments.length;d&&(b=e(b,d));if(f===+f){var h=Ab&&bb.call(a)==rb?a.split(""):a;for(f&&g&&(c=h[--f]);f--;)c=b(c,h[f],f,a);return c}h=dc(a);for((f=h.length)&&g&&(c=a[h[--f]]);f--;)g=h[f],c=b(c,a[g],g,a);return c}function t(a,b,c){if(a)return b==E||c?a[0]:ab.call(a,0,b)}function u(a,b){var c=[];if(!a)return c;for(var d,e=-1,f=a.length;++e<f;)d=a[e],Vb(d)?$.apply(c,b?d:u(d)):c.push(d);return c}function v(a,b,c){if(!a)return-1;var d=-1,e=a.length;if(c){if("number"!=typeof c)return d=y(a,b),a[d]===b?d:-1;d=(0>c?hb(0,e+c):c)-1}for(;++d<e;)if(a[d]===b)return d;return-1}function w(a,b,c){var d=-Infinity,f=d;if(!a)return f;var g=-1,h=a.length;if(!b){for(;++g<h;)a[g]>f&&(f=a[g]);return f}for(c&&(b=e(b,c));++g<h;)c=b(a[g],g,a),c>d&&(d=c,f=a[g]);return f}function x(a,b,c){return a?ab.call(a,b==E||c?1:b):[]}function y(a,b,c,d){if(!a)return 0;var e=0,f=a.length;if(c){d&&(c=A(c,d));for(b=c(b);e<f;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d}else for(;e<f;)d=e+f>>>1,a[d]<b?e=d+1:f=d;return e}function z(a,b,c,d){var f=[];if(!a)return f;var g=-1,h=a.length,i=[];"function"==typeof b&&(d=c,c=b,b=F);for(c?d&&(c=e(c,d)):c=B;++g<h;)if(d=c(a[g],g,a),b?!g||i[i.length-1]!==d:0>v(i,d))i.push(d),f.push(a[g]);return f}function A(a,b){return Db||cb&&2<arguments.length?cb.call.apply(cb,arguments):h(a,b,ab.call(arguments,2))}function B(a){return a}function C(a){oc(ac(a),function(b){var e=c[b]=a[b];d.prototype[b]=function(){var a=[this.__wrapped__];return arguments.length&&$.apply(a,arguments),a=e.apply(c,a),this.__chain__&&(a=new d(a),a.__chain__=D),a}})}var D=!0,E=null,F=!1,G="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(a=global),exports),H=Array.prototype,I=Object.prototype,J=0,K=30,L=a._,M=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,N=/&(?:amp|lt|gt|quot|#x27);/g,O=/\b__p\+='';/g,P=/\b(__p\+=)''\+/g,Q=/(__e\(.*?\)|\b__t\))\+'';/g,R=/\w*$/,S=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g,T=RegExp("^"+(I.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),U=/($^)/,V=/[&<>"']/g,W=/['\n\r\t\u2028\u2029\\]/g,X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Y=H.concat,Z=I.hasOwnProperty,$=H.push,_=I.propertyIsEnumerable,ab=H.slice,bb=I.toString,cb=T.test(cb=ab.bind)&&cb,db=Math.floor,eb=T.test(eb=Array.isArray)&&eb,fb=a.isFinite,gb=T.test(gb=Object.keys)&&gb,hb=Math.max,ib=Math.min,jb=Math.random,kb="[object Arguments]",lb="[object Array]",mb="[object Boolean]",nb="[object Date]",ob="[object Number]",pb="[object Object]",qb="[object RegExp]",rb="[object String]",sb=a.clearTimeout,tb=a.setTimeout,ub,vb,wb,xb=D;(function(){function a(){this.x=1}var b={0:1,length:1},c=[];a.prototype={valueOf:1,y:1};for(var d in new a)c.push(d);for(d in arguments)xb=!d;ub=4>(c+"").length,wb="x"!=c[0],vb=(c.splice.call(b,0,1),b[0])})(1);var yb=!n(arguments),zb="x"!=ab.call("x")[0],Ab="xx"!="x"[0]+Object("x")[0];try{var Bb=("[object Object]",bb.call(a.document||0)==pb)}catch(Cb){}var Db=cb&&/\n|Opera/.test(cb+bb.call(a.opera)),Eb=gb&&/^.+$|true/.test(gb+!!a.attachEvent),Fb=!Db,Gb={};Gb[mb]=Gb[nb]=Gb["[object Function]"]=Gb[ob]=Gb[pb]=Gb[qb]=F,Gb[kb]=Gb[lb]=Gb[rb]=D;var Hb={};Hb[kb]=Hb["[object Function]"]=F,Hb[lb]=Hb[mb]=Hb[nb]=Hb[ob]=Hb[pb]=Hb[qb]=Hb[rb]=D;var Ib={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Jb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},Kb={"boolean":F,"function":D,object:D,number:F,string:F,"undefined":F,unknown:D},Lb={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};c.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Mb={a:"e,d,y",j:"e",q:"if(!d)d=i;else if(y)d=c(d,y)",i:"if(d(A,j,e)===false)return u"},Nb={j:"{}",q:"var q;if(typeof d!='function'){var hh=d;d=function(A){return A[hh]}}else if(y)d=c(d,y)",i:"q=d(A,j,e);(h.call(u,q)?u[q]++:u[q]=1)"},Ob={j:"true",i:"if(!d(A,j,e))return!u"},Pb={r:F,s:F,a:"n",j:"n",q:"for(var a=1,b=arguments.length;a<b;a++){if(k=arguments[a]){",i:"u[j]=A",e:"}}"},Qb={j:"[]",i:"d(A,j,e)&&u.push(A)"},Rb={q:"if(y)d=c(d,y)"},Sb={i:{l:Mb.i}},Tb={j:"",f:"if(!e)return[]",d:{b:"u=Array(l)",l:"u="+(Eb?"Array(l)":"[]")},i:{b:"u[j]=d(A,j,e)",l:"u"+(Eb?"[o]=":".push")+"(d(A,j,e))"}},Ub={r:F,a:"n,d,y",j:"{}",q:"var R=typeof d=='function';if(!R){var t=f.apply(E,arguments)}else if(y)d=c(d,y)",i:"if(R?!d(A,j,n):M(t,j)<0)u[j]=A"};yb&&(n=function(a){return!!a&&!!Z.call(a,"callee")});var Vb=eb||function(a){return bb.call(a)==lb};o(/x/)&&(o=function(a){return"[object Function]"==bb.call(a)});var Wb=Kb.__proto__!=I?p:function(a,b){if(!a)return F;var c=a.valueOf,d="function"==typeof c&&(d=c.__proto__)&&d.__proto__;return d?a==d||a.__proto__==d&&(b||!n(a)):p(a)},Xb=i({a:"n",j:"[]",i:"u.push(j)"}),Yb=i(Pb,{i:"if(u[j]==null)"+Pb.i}),Zb=i(Pb),$b=i(Mb,Rb,Sb,{r:F}),_b=i(Mb,Rb,Sb),ac=i({r:F,a:"n",j:"[]",i:"if(S(A))u.push(j)",e:"u.sort()"}),bc=i({a:"n",j:"{}",i:"u[A]=j"}),cc=i({a:"A",j:"true",q:"var H=z.call(A),l=A.length;if(D[H]"+(yb?"||O(A)":"")+"||(H==W&&l===+l&&S(A.splice)))return!l",i:{l:"return false"}}),dc=gb?function(a){var b=typeof a;return"function"==b&&_.call(a,"prototype")?Xb(a):a&&Kb[b]?gb(a):[]}:Xb,ec=i(Pb,{a:"n,cc,N",q:"var b,P,dd,ee,C=arguments,a=0;if(N==T){b=2;dd=C[3];ee=C[4]}else{b=C.length;dd=[];ee=[]}while(++a<b){if(k=C[a]){",i:"if((cc=A)&&((P=Q(cc))||T(cc))){var K=false,ff=dd.length;while(ff--)if(K=dd[ff]==cc)break;if(K){u[j]=ee[ff]}else{dd.push(cc);ee.push(A=(A=u[j])&&P?(Q(A)?A:[]):(T(A)?A:{}));u[j]=G(A,cc,T,dd,ee)}}else if(cc!=null)u[j]=cc"}),fc=i(Ub),gc=i({a:"n",j:"[]",i:"u"+(Eb?"[o]=":".push")+"([j,A])"}),hc=i(Ub,{q:"if(typeof d!='function'){var q,t=f.apply(E,arguments),l=t.length;for(j=1;j<l;j++){q=t[j];if(q in n)u[q]=n[q]}}else{if(y)d=c(d,y)",i:"if(d(A,j,n))u[j]=A",e:"}"}),ic=i({a:"n",j:"[]",i:"u.push(A)"}),jc=i({a:"e,gg",j:"false",o:F,d:{b:"if(z.call(e)==x)return e.indexOf(gg)>-1"},i:"if(A===gg)return true"}),kc=i(Mb,Nb),lc=i(Mb,Ob),mc=i(Mb,Qb),nc=i(Mb,Rb,{j:"",i:"if(d(A,j,e))return A"}),oc=i(Mb,Rb),pc=i(Mb,Nb,{i:"q=d(A,j,e);(h.call(u,q)?u[q]:u[q]=[]).push(A)"}),qc=i(Tb,{a:"e,U",q:"var C=w.call(arguments,2),R=typeof U=='function'",i:{b:"u[j]=(R?U:A[U]).apply(A,C)",l:"u"+(Eb?"[o]=":".push")+"((R?U:A[U]).apply(A,C))"}}),rc=i(Mb,Tb),sc=i(Tb,{a:"e,aa",i:{b:"u[j]=A[aa]",l:"u"+(Eb?"[o]=":".push")+"(A[aa])"}}),tc=i({a:"e,d,B,y",j:"B",q:"var V=arguments.length<3;if(y)d=c(d,y)",d:{b:"if(V)u=k[++j]"},i:{b:"u=d(u,A,j,e)",l:"u=V?(V=false,A):d(u,A,j,e)"}}),uc=i(Mb,Qb,{i:"!"+Qb.i}),vc=i(Mb,Ob,{j:"false",i:Ob.i.replace("!","")}),wc=i(Mb,Nb,Tb,{i:{b:"u[j]={a:d(A,j,e),b:j,c:A}",l:"u"+(Eb?"[o]=":".push")+"({a:d(A,j,e),b:j,c:A})"},e:"u.sort(I);l=u.length;while(l--)u[l]=u[l].c"}),xc=i(Qb,{a:"e,Z",q:"var t=[];J(Z,function(A,q){t.push(q)});var bb=t.length",i:"for(var q,Y=true,s=0;s<bb;s++){q=t[s];if(!(Y=A[q]===Z[q]))break}Y&&u.push(A)"}),yc=i({r:F,s:F,a:"n",j:"n",q:"var L=arguments,l=L.length;if(l>1){for(var j=1;j<l;j++)u[L[j]]=F(u[L[j]],u);return u}",i:"if(S(u[j]))u[j]=F(u[j],u)"});c.VERSION="0.7.0",c.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}},c.bind=A,c.bindAll=yc,c.chain=function(a){return a=new d(a),a.__chain__=D,a},c.clone=q,c.compact=function(a){var b=[];if(!a)return b;for(var c=-1,d=a.length;++c<d;)a[c]&&b.push(a[c]);return b},c.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}},c.contains=jc,c.countBy=kc,c.debounce=function(a,b,c){function d(){h=E,c||(f=a.apply(g,e))}var e,f,g,h;return function(){var i=c&&!h;return e=arguments,g=this,sb(h),h=tb(d,b),i&&(f=a.apply(g,e)),f}},c.defaults=Yb,c.defer=function(a){var c=ab.call(arguments,1);return tb(function(){return a.apply(b,c)},1)},c.delay=function(a,c){var d=ab.call(arguments,2);return tb(function(){return a.apply(b,d)},c)},c.difference=function(a){var b=[];if(!a)return b;for(var c=-1,d=a.length,e=Y.apply(b,arguments),e=f(e,d);++c<d;)e(a[c])||b.push(a[c]);return b},c.escape=function(a){return a==E?"":(a+"").replace(V,k)},c.every=lc,c.extend=Zb,c.filter=mc,c.find=nc,c.first=t,c.flatten=u,c.forEach=oc,c.forIn=$b,c.forOwn=_b,c.functions=ac,c.groupBy=pc,c.has=function(a,b){return a?Z.call(a,b):F},c.identity=B,c.indexOf=v,c.initial=function(a,b,c){return a?ab.call(a,0,-(b==E||c?1:b)):[]},c.intersection=function(a){var b=[];if(!a)return b;var c,d=arguments.length,e=[],g=-1,h=a.length;a:for(;++g<h;)if(c=a[g],0>v(b,c)){for(var i=1;i<d;i++)if(!(e[i]||(e[i]=f(arguments[i])))(c))continue a;b.push(c)}return b},c.invert=bc,c.invoke=qc,c.isArguments=n,c.isArray=Vb,c.isBoolean=function(a){return a===D||a===F||bb.call(a)==mb},c.isElement=function(a){return a?1===a.nodeType:F},c.isEmpty=cc,c.isEqual=r,c.isFinite=function(a){return fb(a)&&bb.call(a)==ob},c.isFunction=o,c.isNaN=function(a){return bb.call(a)==ob&&a!=+a},c.isNull=function(a){return a===E},c.isObject=function(a){return a?Kb[typeof a]:F},c.isUndefined=function(a){return a===b},c.keys=dc,c.last=function(a,b,c){if(a){var d=a.length;return b==E||c?a[d-1]:ab.call(a,-b||d)}},c.lastIndexOf=function(a,b,c){if(!a)return-1;var d=a.length;for(c&&"number"==typeof c&&(d=(0>c?hb(0,d+c):ib(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},c.lateBind=function(a,b){return h(b,a,ab.call(arguments,2))},c.map=rc,c.max=w,c.memoize=function(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return Z.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},c.merge=ec,c.min=function(a,b,c){var d=Infinity,f=d;if(!a)return f;var g=-1,h=a.length;if(!b){for(;++g<h;)a[g]<f&&(f=a[g]);return f}for(c&&(b=e(b,c));++g<h;)c=b(a[g],g,a),c<d&&(d=c,f=a[g]);return f},c.mixin=C,c.noConflict=function(){return a._=L,this},c.object=function(a,b){if(!a)return{};for(var c=-1,d=a.length,e={};++c<d;)b?e[a[c]]=b[c]:e[a[c][0]]=a[c][1];return e},c.omit=fc,c.once=function(a){var b,c=F;return function(){return c?b:(c=D,b=a.apply(this,arguments),a=E,b)}},c.pairs=gc,c.partial=function(a){return h(a,ab.call(arguments,1))},c.pick=hc,c.pluck=sc,c.random=function(a,b){return a==E&&b==E&&(b=1),a=+a||0,b==E&&(b=a,a=0),a+db(jb()*((+b||0)-a+1))},c.range=function(a,b,c){a=+a||0,c=+c||1,b==E&&(b=a,a=0);for(var d=-1,b=hb(0,Math.ceil((b-a)/c)),e=Array(b);++d<b;)e[d]=a,a+=c;return e},c.reduce=tc,c.reduceRight=s,c.reject=uc,c.rest=x,c.result=function(a,b){if(!a)return E;var c=a[b];return o(c)?a[b]():c},c.shuffle=function(a){if(!a)return[];for(var b,c=-1,d=a.length,e=Array(d);++c<d;)b=db(jb()*(c+1)),e[c]=e[b],e[b]=a[c];return e},c.size=function(a){if(!a)return 0;var b=a.length;return b===+b?b:dc(a).length},c.some=vc,c.sortBy=wc,c.sortedIndex=y,c.tap=function(a,b){return b(a),a},c.template=function(a,b,d){d||(d={});var a=a+"",e,f,g=0,h=c.templateSettings,i="__p += '",k=d.variable||h.variable,l=k;a.replace(RegExp((d.escape||h.escape||U).source+"|"+(d.interpolate||h.interpolate||U).source+"|"+(d.evaluate||h.evaluate||U).source+"|$","g"),function(b,c,d,f,h){i+=a.slice(g,h).replace(W,j),i+=c?"'+__e("+c+")+'":f?"';"+f+";__p+='":d?"'+((__t=("+d+"))==null?'':__t)+'":"",e||(e=f||M.test(c||d)),g=h+b.length}),i+="';",l||(k="obj",e?i="with("+k+"){"+i+"}":(d=RegExp("(\\(\\s*)"+k+"\\."+k+"\\b","g"),i=i.replace(S,"$&"+k+".").replace(d,"$1__d"))),i=(e?i.replace(O,""):i).replace(P,"$1").replace(Q,"$1;"),i="function("+k+"){"+(l?"":k+"||("+k+"={});")+"var __t,__p='',__e=_.escape"+(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":(l?"":",__d="+k+"."+k+"||"+k)+";")+i+"return __p}";try{f=Function("_","return "+i)(c)}catch(m){throw m.source=i,m}return b?f(b):(f.source=i,f)},c.throttle=function(a,b){function c(){h=new Date,g=E,e=a.apply(f,d)}var d,e,f,g,h=0;return function(){var i=new Date,j=b-(i-h);return d=arguments,f=this,0>=j?(h=i,e=a.apply(f,d)):g||(g=tb(c,j)),e}},c.times=function(a,b,c){var d=-1,e=Array(a||0);if(c)for(;++d<a;)e[d]=b.call(c,d);else for(;++d<a;)e[d]=b(d);return e},c.toArray=function(a){if(!a)return[];var b=a.length;return b===+b?(zb?bb.call(a)==rb:"string"==typeof a)?a.split(""):ab.call(a):ic(a)},c.unescape=function(a){return a==E?"":(a+"").replace(N,m)},c.union=function(){for(var a=-1,b=[],c=Y.apply(b,arguments),d=c.length;++a<d;)0>v(b,c[a])&&b.push(c[a]);return b},c.uniq=z,c.uniqueId=function(a){var b=J++;return a?a+b:b},c.values=ic,c.where=xc,c.without=function(a){var b=[];if(!a)return b;for(var c=-1,d=a.length,e=f(arguments,1,20);++c<d;)e(a[c])||b.push(a[c]);return b},c.wrap=function(a,b){return function(){var c=[a];return arguments.length&&$.apply(c,arguments),b.apply(this,c)}},c.zip=function(a){if(!a)return[];for(var b=-1,c=w(sc(arguments,"length")),d=Array(c);++b<c;)d[b]=sc(arguments,b);return d},c.all=lc,c.any=vc,c.collect=rc,c.detect=nc,c.drop=x,c.each=oc,c.foldl=tc,c.foldr=s,c.head=t,c.include=jc,c.inject=tc,c.methods=ac,c.select=mc,c.tail=x,c.take=t,c.unique=z,oc({Date:nb,Number:ob,RegExp:qb,String:rb},function(a,b){c["is"+b]=function(b){return bb.call(b)==a}}),d.prototype=c.prototype,C(c),d.prototype.chain=function(){return this.__chain__=D,this},d.prototype.value=function(){return this.__wrapped__},oc("pop push reverse shift sort splice unshift".split(" "),function(a){var b=H[a];d.prototype[a]=function(){var a=this.__wrapped__;return b.apply(a,arguments),vb&&a.length===0&&delete a[0],this.__chain__&&(a=new d(a),a.__chain__=D),a}}),oc(["concat","join","slice"],function(a){var b=H[a];d.prototype[a]=function(){var a=b.apply(this.__wrapped__,arguments);return this.__chain__&&(a=new d(a),a.__chain__=D),a}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(a._=c,define(function(){return c})):G?"object"==typeof module&&module&&module.exports==G?(module.exports=c)._=c:G._=c:a._=c}(this),function(){var a=this,b=a.Backbone,c=Array.prototype.slice,d=Array.prototype.splice,e;e="undefined"!=typeof exports?exports:a.Backbone={},e.VERSION="0.9.2";var f=a._;!f&&"undefined"!=typeof require&&(f=require("underscore"));var g=a.jQuery||a.Zepto||a.ender;e.setDomLibrary=function(a){g=a},e.noConflict=function(){return a.Backbone=b,this},e.emulateHTTP=!1,e.emulateJSON=!1;var h=/\s+/,i=e.Events={on:function(a,b,c){var d,e,f,g,i;if(!b)return this;a=a.split(h);for(d=this._callbacks||(this._callbacks={});e=a.shift();)f=(i=d[e])?i.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:i?i.next:f};return this},off:function(a,b,c){var d,e,g,i,j,k;if(e=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(h):f.keys(e);d=a.shift();)if(g=e[d],delete e[d],g&&(b||c))for(i=g.tail;(g=g.next)!==i;)(j=g.callback,k=g.context,b&&j!==b||c&&k!==c)&&this.on(d,j,k);return this}},trigger:function(a){var b,d,e,f,g,i;if(!(e=this._callbacks))return this;g=e.all,a=a.split(h);for(i=c.call(arguments,1);b=a.shift();){if(d=e[b])for(f=d.tail;(d=d.next)!==f;)d.callback.apply(d.context||this,i);if(d=g){f=d.tail;for(b=[b].concat(i);(d=d.next)!==f;)d.callback.apply(d.context||this,b)}}return this}};i.bind=i.on,i.unbind=i.off;var j=e.Model=function(a,b){var c;a||(a={}),b&&b.parse&&(a=this.parse(a));if(c=y(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=f.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(a,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=f.clone(this.attributes),this.initialize.apply(this,arguments)};f.extend(j.prototype,i,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;return(b=this._escapedAttributes[a])?b:(b=this.get(a),this._escapedAttributes[a]=f.escape(null==b?"":""+b))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b),c||(c={});if(!d)return this;d instanceof j&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var b=c.changes={},g=this.attributes,h=this._escapedAttributes,i=this._previousAttributes||{};for(e in d){a=d[e];if(!f.isEqual(g[e],a)||c.unset&&f.has(g,e))delete h[e],(c.silent?this._silent:b)[e]=!0;c.unset?delete g[e]:g[e]=a,!f.isEqual(i[e],a)||f.has(g,e)!=f.has(i,e)?(this.changed[e]=a,c.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e])}return c.silent||this.change(c),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(f.clone(this.attributes),a)},fetch:function(a){var a=a?f.clone(a):{},b=this,c=a.success;return a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)},a.error=e.wrapError(a.error,b,a),(this.sync||e.sync).call(this,"read",this,a)},save:function(a,b,c){var d,g;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b),c=c?f.clone(c):{};if(c.wait){if(!this._validate(d,c))return!1;g=f.clone(this.attributes)}a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c))return!1;var h=this,i=c.success;return c.success=function(a,b,e){b=h.parse(a,e),c.wait&&(delete c.wait,b=f.extend(d||{},b));if(!h.set(b,c))return!1;i?i(h,a):h.trigger("sync",h,a,c)},c.error=e.wrapError(c.error,h,c),b=this.isNew()?"create":"update",b=(this.sync||e.sync).call(this,b,this,c),c.wait&&this.set(g,a),b},destroy:function(a){var a=a?f.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d(),!1;a.success=function(e){a.wait&&d(),c?c(b,e):b.trigger("sync",b,e,a)},a.error=e.wrapError(a.error,b,a);var g=(this.sync||e.sync).call(this,"delete",this,a);return a.wait||d(),g},url:function(){var a=y(this,"urlRoot")||y(this.collection,"url")||z();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var d=f.extend({},a.changes,this._silent);this._silent={};for(c in d)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!f.isEmpty(this._pending);){this._pending={},this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=f.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(a){return arguments.length?f.has(this.changed,a):!f.isEmpty(this.changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes,e;for(e in a)f.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;var a=f.extend({},this.attributes,a),c=this.validate(a,b);return c?(b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}});var k=e.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})};f.extend(k.prototype,i,{model:j,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,e,g,h,i,j={},k={},l=[];b||(b={}),a=f.isArray(a)?a.slice():[a],c=0;for(e=a.length;c<e;c++){if(!(g=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");h=g.cid,i=g.id,j[h]||this._byCid[h]||null!=i&&(k[i]||this._byId[i])?l.push(c):j[h]=k[i]=g}for(c=l.length;c--;)a.splice(l[c],1);c=0;for(e=a.length;c<e;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,null!=g.id&&(this._byId[g.id]=g);this.length+=e,d.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;c=0;for(e=this.models.length;c<e;c++)j[(g=this.models[c]).cid]&&(b.index=c,g.trigger("add",g,this,b));return this},remove:function(a,b){var c,d,e,g;b||(b={}),a=f.isArray(a)?a.slice():[a],c=0;for(d=a.length;c<d;c++)if(g=this.getByCid(a[c])||this.get(a[c]))delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,b),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,f.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return this._reset(),this.add(a,f.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?f.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){b[a.add?"add":"reset"](b.parse(d,f),a),c&&c(b,d)},a.error=e.wrapError(a.error,b,a),(this.sync||e.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?f.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(e,f){b.wait&&c.add(e,b),d?d(e,f):e.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a){return a},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){return b||(b={}),a instanceof j?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1)),a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments))}}),f.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){k.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}});var l=e.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},m=/:\w+/g,n=/\*\w+/g,o=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(l.prototype,i,{initialize:function(){},route:function(a,b,c){return e.history||(e.history=new p),f.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),e.history.route(a,f.bind(function(d){d=this._extractParameters(a,d),c&&c.apply(this,d),this.trigger.apply(this,["route:"+b].concat(d)),e.history.trigger("route",this,b,d)},this)),this},navigate:function(a,b){e.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){return a=a.replace(o,"\\$&").replace(m,"([^/]+)").replace(n,"(.*?)"),RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var p=e.History=function(){this.handlers=[],f.bindAll(this,"checkUrl")},q=/^[#\/]/,r=/msie [\w.]+/;p.started=!1,f.extend(p.prototype,i,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c)}else a=this.getHash();return a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(q,"")},start:function(a){if(p.started)throw Error("Backbone.history has already been started");p.started=!0,this.options=f.extend({},{root:"/"},this.options,a),this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=r.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=g('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?g(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?g(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=a,a=window.location,b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(q,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){g(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),p.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!p.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(q,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var s=e.View=function(a){this.cid=f.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},t=/^(\S+)\s*(.*)$/,u="model,collection,el,id,attributes,className,tagName".split(",");f.extend(s.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){return a=document.createElement(a),b&&g(a).attr(b),c&&g(a).html(c),a},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof g?a:g(a),this.el=this.$el[0],!1!==b&&this.delegateEvents(),this},delegateEvents:function(a){if(a||(a=y(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(t),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=u.length;b<c;b++){var d=u[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var a=y(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}}}),j.extend=k.extend=l.extend=s.extend=function(a,b){var c=x(this,a,b);return c.extend=this.extend,c};var v={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(a,b,c){var d=v[a];c||(c={});var h={type:d,dataType:"json"};return c.url||(h.url=y(b,"url")||z()),!c.data&&b&&("create"==a||"update"==a)&&(h.contentType="application/json",h.data=JSON.stringify(b.toJSON())),e.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),e.emulateHTTP&&("PUT"===d||"DELETE"===d)&&(e.emulateJSON&&(h.data._method=d),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)}),"GET"!==h.type&&!e.emulateJSON&&(h.processData=!1),g.ajax(f.extend(h,c))},e.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};var w=function(){},x=function(a,b,c){var d;return d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)},f.extend(d,a),w.prototype=a.prototype,d.prototype=new w,b&&f.extend(d.prototype,b),c&&f.extend(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d},y=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},z=function(){throw Error('A "url" property or function must be specified')}}.call(this),this.Handlebars={},function(a){a.VERSION="1.0.rc.1",a.helpers={},a.partials={},a.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},a.registerPartial=function(a,b){this.partials[a]=b},a.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")});var b=Object.prototype.toString,c="[object Function]";a.registerHelper("blockHelperMissing",function(d,e){var f=e.inverse||function(){},g=e.fn,h="",i=b.call(d);return i===c&&(d=d.call(this)),d===!0?g(this):d===!1||d==null?f(this):i==="[object Array]"?d.length>0?a.helpers.each(d,e):f(this):g(d)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.registerHelper("each",function(b,c){var d=c.fn,e=c.inverse,f="",g;c.data&&(g=a.createFrame(c.data));if(b&&b.length>0)for(var h=0,i=b.length;h<i;h++)g&&(g.index=h),f+=d(b[h],{data:g});else f=e(this);return f}),a.registerHelper("if",function(d,e){var f=b.call(d);return f===c&&(d=d.call(this)),!d||a.Utils.isEmpty(d)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){var d=c.fn,e=c.inverse;return c.fn=e,c.inverse=d,a.helpers["if"].call(this,b,c)}),a.registerHelper("with",function(a,b){return b.fn(a)}),a.registerHelper("log",function(b){a.log(b)})}(this.Handlebars),Handlebars.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:(d=this.programs[a]=Handlebars.VM.program(b),d)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){var g={helpers:d,partials:e,data:f};if(a===undefined)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode");return e[b]=Handlebars.compile(a,{data:f!==undefined}),e[b](c,g)}},Handlebars.template=Handlebars.VM.template,function(){var a;a=location.protocol+"//"+location.hostname.replace(/^admin/,"api"),window.hoodie=new Hoodie(a),window.pocket={Models:{},Collections:{},Views:{},Routers:{},init:function(){return console.log("Hello from Backbone! Woop"),this.app=new pocket.Views.applicationView,this.router=new pocket.Routers.ApplicationRouter,Backbone.history.start()}},window.escapeExpression=Handlebars.Utils.escapeExpression,$(document).ready(function(){return pocket.init()})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};pocket.Views.applicationView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.events={"click a":"handleLinks"},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.setElement($("html")),this.dashboard=new pocket.Views.dashboardView,this.users=new pocket.Views.usersView},c.prototype.handleLinks=function(a){var b;b=$(this).attr("href");if(/\.pdf$/.test(b))return!0;if(/^\/[^\/]/.test(b))return router.navigate(b.substr(1),!0),!1},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};pocket.Views.dashboardView=function(b){function d(){return this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template="dashboard",d.prototype.initialize=function(){return d.__super__.initialize.apply(this,arguments),this.setElement($(".main"))},d.prototype.active=function(){return this.loadStats()},d.prototype.loadStats=function(){return window.hoodie.admin.stats(1358610679).then(this.render)},d.prototype.render=function(a){return this.stats=a,this.$el.html(Handlebars.VM.template(JST[this.template])(this)),d.__super__.render.apply(this,arguments)},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};pocket.Views.usersView=function(b){function d(){return this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template="users",d.prototype.initialize=function(){return d.__super__.initialize.apply(this,arguments),this.setElement($(".main"))},d.prototype.active=function(){return this.loadUsers()},d.prototype.loadUsers=function(){return window.hoodie.admin.users.findAll().then(this.render)},d.prototype.render=function(a){return this.users=a,this.$el.html(Handlebars.VM.template(JST[this.template])(this)),d.__super__.render.apply(this,arguments)},d}(Backbone.View)}.call(this),pocket.Models.ApplicationModel=Backbone.Model.extend({}),pocket.Collections.ApplicationCollection=Backbone.Collection.extend({model:pocket.Models.ApplicationModel}),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};pocket.Routers.ApplicationRouter=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.routes={"":"dashboard",users:"users"},c.prototype.dashboard=function(){return pocket.app.dashboard.active()},c.prototype.users=function(){return pocket.app.users.active()},c}(Backbone.Router)}.call(this),this.JST=this.JST||{},this.JST.application=function(a,b,c,d,e){return c=c||a.helpers,e=e||{},"<p>Your content here</p>\n\n"},this.JST.dashboard=function(a,b,c,d,e){c=c||a.helpers,e=e||{};var f="",g,h,i="function",j=this.escapeExpression;return f+='      <div class="content centered">\n        <h2 class="top">',h=c.title,h?g=h.call(b,{hash:{},data:e}):(g=b.title,g=typeof g===i?g.apply(b):g),f+=a.Utils.escapeExpression(g)+'New events for minutes.io  since your last visit <span class="timeago">',g=b.stats,g=g==null||g===!1?g:g.since,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</span></h2>\n        <h3 class="top">Users</h3>\n        <div class="row-fluid statistics">\n          <div class="panel success span4">\n            <span>New signups/past 30 days</span>\n            <h1>',g=b.stats,g=g==null||g===!1?g:g.signups,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n          </div>\n          <div class="panel warning span4">\n            <span>Account deletions/past 30 days</span>\n            <h1>',g=b.stats,g=g==null||g===!1?g:g.account_deletions,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n          </div>\n          <div class="panel success span4">\n            <span>Growth/past 30 days</span>\n            <h1>',g=b.stats,g=g==null||g===!1?g:g.growth,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'%</h1>\n          </div>\n        </div>\n        <div class="row-fluid statistics">\n          <div class="panel info span4">\n            <span>Total</span>\n            <h1>',g=b.stats,g=g==null||g===!1?g:g.users_total,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n          </div>\n          <div class="panel info span4">\n            <span>Active/past 30 days</span>\n            <h1>',g=b.stats,g=g==null||g===!1?g:g.users_active,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n          </div>\n          <div class="panel warning span4">\n            <span>Activity/past 30 days</span>\n            <h1>',g=b.stats,g=g==null||g===!1?g:g.active,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'%</h1>\n          </div>\n        </div>\n        <h3>Messages and errors</h3>\n        <div class="alert alert-error">\n          <button type="button" class="close" data-dismiss="alert">&times;</button>\n          <ul>\n            <li>Module Mail reports error: Cannot send email (about 4 hours ago)</li>\n            <li>Module Mail reports error: Cannot send email (about 4 hours ago)</li>\n            <li>Module Mail reports error: Cannot send email (about 5 hours ago)</li>\n            <li>46 additional new errors in this module</li>\n          </ul>\n        </div>\n        <div class="alert alert-info">\n          <button type="button" class="close" data-dismiss="alert">&times;</button>\n          <ul>\n            <li>Module Signup confirmation reports: New user confirmed! (about 6 hours ago)</li>\n          </ul>\n        </div>\n      </div>',f},this.JST.users=function(a,b,c,d,e){function l(b,d){var e="",f,g;return e+="\n            <tr>\n              <td>",g=c.name,g?f=g.call(b,{hash:{},data:d}):(f=b.name,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n              <td>",g=c.lastLogin,g?f=g.call(b,{hash:{},data:d}):(f=b.lastLogin,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n              <td>",g=c.signedUpAt,g?f=g.call(b,{hash:{},data:d}):(f=b.signedUpAt,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n              <td>",g=c.state,g?f=g.call(b,{hash:{},data:d}):(f=b.state,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n              <td>resend / new</td>\n              <td>edit / delete</td>\n            </tr>\n            ",e}c=c||a.helpers,e=e||{};var f="",g,h,i="function",j=this.escapeExpression,k=this;f+='<div class="content centered">\n        <h2 class="top">Users</h2>\n        <div class="userSearch">\n          <form class="form-search">\n            <input type="text" class="input-large search-query" placeholder="Search in users">\n            <button type="submit" class="btn">Search</button>\n          </form>\n          <div class="pagination pagination-right">\n            <ul>\n              <li class="disabled"><a href="#">Prev</a></li>\n              <li class="active"><a href="#">1</a></li>\n              <li><a href="#">2</a></li>\n              <li><a href="#">3</a></li>\n              <li><a href="#">4</a></li>\n              <li><a href="#">5</a></li>\n              <li><a href="#">Next</a></li>\n            </ul>\n          </div>\n        </div>\n        <div class="tableStatus">\n          <p class="currentSearchTerm muted">Currently displaying all users</p>\n          <p class="currentSearchMetrics muted">Showing 50 of 4211 users</p>\n        </div>\n        <table class="table">\n          <thead>\n            <tr>\n              <th>Email</th>\n              <th>Last seen</th>\n              <th>Signup date</th>\n              <th>State</th>\n              <th>Password</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>hello@alexfeyerke.com</td>\n              <td>2 hours ago</td>\n              <td>17.06.12</td>\n              <td>confirmed</td>\n              <td>resend / new</td>\n              <td>edit / delete</td>\n            </tr>\n            ',g=b.users,h={},g=c.each.call(b,g,{hash:h,inverse:k.noop,fn:k.program(1,l,e),data:e});if(g||g===0)f+=g;return f+='\n          </tbody>\n        </table>\n        <div class="tableStatus">\n          <p class="currentSearchTerm muted">Currently displaying all users</p>\n          <p class="currentSearchMetrics muted">Showing 50 of 4211 users</p>\n        </div>\n        <div class="userSearch">\n\n        <div class="pagination pagination-right">\n          <ul>\n            <li class="disabled"><a href="#">Prev</a></li>\n            <li class="active"><a href="#">1</a></li>\n            <li><a href="#">2</a></li>\n            <li><a href="#">3</a></li>\n            <li><a href="#">4</a></li>\n            <li><a href="#">5</a></li>\n            <li><a href="#">Next</a></li>\n          </ul>\n        </div>\n        </div>\n      </div>\n',f};